import ete3

t = ete3.Tree("((((Micrarchaeum_acidiphilum:3134.18,DUSEL3:3134.18)3960.24_1867.16:850.133,(((Nanosalinarum:1172.6,Nanosalina:1172.6)2118.44_516.154:2113.55,Ar5:3286.15)3937.55_2383.94:352.634,(Nanoarchaeum:3203.93,(Parvarchaeum_acidophilus:2925.06,((DUSEL4:1911.81,Ar15:1911.81)2757.51_1060.63:490.688,(Ar6:1544.57,Ar13:1544.57)2385.78_861.738:857.919)3199.58_1649.36:522.571)3610.76_2198.04:278.869)3818.31_2480.04:434.851)4136.78_2996.1:345.524)4341.33_3485.23:254.774,((((Methanothermobacter_thermautotro:2374.11,Methanopyrus_kandleri:2374.11)3477.75_939.305:737.933,(Pyrococcus_furiosus:2421.81,Methanococcus_jannaschii:2421.81)3492.64_1071.33:690.23)3862.77_1643.27:634.432,((Thermoplasma_volcanium:1941.87,Methanomassiliicoccus_luminyensis:1941.87)3041.09_941.872:1135.47,((Methanosarcina_mazei:1531.25,Haloarcula_marismortui:1531.25)2494.95_745.798:754.389,Archaeoglobus_fulgidus:2285.64)3207.93_1293.86:791.703)3746.13_2037.45:669.128)4088.87_3516.07:320.845,(Korarchaeum_cryptofilum:3744.97,(((Loki3:2860.19,(Lokiarchaeum:1875.41,Loki2:1875.41)2756.92_1039.37:984.777)3427.13_2019.52:511.345,(((Giardia_lamblia:1879.79,(Trichomonas_vaginalis:1644.91,(Leishmania_major:599.014,Bodo:599.014)1067.72_298.506:1045.9)2066.42_1219.31:234.884)2275.57_1466.71:321.429,(((Reticulomyxa:1376.01,Elphidium:1376.01)1818.14_919.932:600.338,((Tetrahymena:1095.83,Paramecium:1095.83)1604.17_643.221:781.031,(Phytophthora_ramorum:1344.91,(Thalassiosira_pseudonana:1057.76,Ectocarpus:1057.76)1523.85_618.314:287.151)1797.1_868.607:531.947)2256.02_1548.77:99.4918)2341.21_1660.52:120.265,(Cyanophora:1807.97,((Galdieria:1277.27,(Cyanidioschyzon:991.403,Chondrus:991.403)1398.71_587.056:285.87)1613.03_870.327:450.289,((Volvox:414.11,Chlamydomonas:414.11)788.128_192.675:705.988,(Physcomitrella:479.091,(Oryza_sativa:229.182,Arabidopsis_thaliana:229.182)246.745_190.078:249.909)507.741_450.75:641.008)1529.63_742.042:607.464)1884.99_1429.51:80.4082)2064.19_1482.85:288.643)2468.29_1795.64:104.609)2598.26_1886.09:63.306,((Polysphondylium:934.063,Dictyostelium_discoideum:934.063)1620.12_444.748:1185.64,(((Hydra:665.242,(Limulus:550.34,Homo_sapiens:550.34)703.629_361.958:114.901)781.313_506.577:97.381,Amphimedon:762.623)830.336_621.238:991.625,(Batrachochytrium:1304.38,(Saccharomyces_cerevisiae:951.877,Agaricus:951.877)1458.87_561.367:352.502)1784.77_852.148:449.868)2229.03_1281.61:365.46)2539.05_1744.3:144.822)2660.4_1948.43:1107)3759.76_2967.03:256.348,(((The09:2102.01,((Nitrosopumilus_maritimus:295.875,Nitrosoarchaeum_limnia:295.875)631.116_136.341:416.312,Cenarchaeum_symbiosum:712.187)1292.36_367.592:1389.82)2859.06_1354.84:579.253,Caldiarchaeum_subterraneum:2681.26)3323.98_1846.74:712.758,(Crenynpffa:2897.69,((Thermofilum_pendens:2075.41,(Pyrobaculum_aerophilum:1133.7,Caldivirga_maquilingensis:1133.7)1858.42_608.797:941.719)2737.24_1387.28:503.114,(Sulfolobus_solfataricus:2060.02,(Staphylothermus_marinus:1669.96,(Ignicoccus_hospitalis:1420.47,(Hyperthermus_butylicus:1104.64,Aeropyrum_pernix:1104.64)1747.83_648.981:315.834)2058.31_919.09:249.492)2326.48_1095.54:390.061)2665.8_1450.63:518.506)3153.59_1985.48:319.165)3446.15_2299.64:496.326)3783.73_2926.18:233.861)3958.83_3269.22:117.092)4050.14_3402.7:322.344)4313.55_3778.08:171.766)4471.87_3933.71:229.91,((Kosmotoga:3442.34,(Dictyoglomus:2642.11,Caldisericum:2642.11)3506.23_1362.08:800.223)3816.92_2457.92:333.754,(Jonquetella:3705.55,(Candidatus:3628.38,((Gloeobacter:3255.55,(Synechocystis_sp._PCC6803:2056.53,(Cylindrosperopsis:545.401,Chlorogloeopsis:545.401)1496.34_194.549:1511.12)3085.73_809.519:1199.03)3332.41_3226.06:338.487,(((Treponema_pallidum:2244.72,Clostridium_acetobutylicum:2244.72)2923.81_1333.89:694.176,(((Oscillochloris:2063.24,(Parcubacteria:1457.17,Microgenomates:1457.17)2069.82_900.323:606.067)2631.78_1444.59:496.82,Chthonomonas:2560.06)3028.81_1989.93:178.637,Actinomadura:2738.69)3183.94_2185.21:200.208)3308.1_2440.05:308.08,(Elusimicrobium:3101.14,(((Rhodopirellula_baltica:2344.75,((Verrucomicrobium:1423.89,Lentisphaera:1423.89)2030.98_847.116:417.376,Chlamydia_trachomatis:1841.27)2438.01_1280.04:503.489)2855.31_1805.44:350.624,(Fibrobacter:2314.33,((Latescibacteria:1602.2,Gemmatimonas:1602.2)2250.4_936.73:396.632,(Chlorobium:1440.1,Caldithrix:1440.1)2111.42_786.073:558.733)2544.23_1399.74:315.496)2800.02_1731.57:381.048)3079.99_2244.5:237.494,((Desulfurispirillum:2464.87,(((Rickettsia:1306.5,Rhodopseudomonas_palustris:1306.5)1788.9_1047.23:583.64,Escherichia_coli:1890.14)2397.93_1447.04:330.335,Campylobacter_jejuni:2220.47)2697.55_1743.43:244.395)2891.43_2002.23:191.776,(Aquifex:2337.2,((Thermodesulfovibrio:1600.97,Thermodesulfatator:1600.97)2328.37_819.47:302.948,Acidobacterium:1903.92)2568.73_1122.26:433.286)2855.06_1625.78:319.438)3045.05_2208.43:276.23)3267.05_2546.01:168.263)3391.7_2702.65:145.844)3500.81_2893.13:347.059)3737.95_3471.83:34.3404)3768.57_3503.51:77.17)3845.94_3574.19:70.5397)3925.66_3636.79:692.904);",format=1)

i = 0

mapping_species = dict()

for n in t.traverse():
    if n.is_root() == True:
        n.name = "Root"
        ml = n.get_leaves()[0]

        print(n.get_distance(ml))
    elif n.is_leaf():
        i+=1
        mapping_species[n.name] =  "n" + str(i)
        n.name = "n" + str(i)
    else:
        i+=1
        n.name = "n" + str(i)

print(t.write(format=1))

with open("/Users/aadavin/Desktop/Last/GregTest/mapping_names", "w") as f:
    for k,v in mapping_species.items():
        line = "\t".join([k,v]) + "\n"
        f.write(line)






'''
i = 0

line = ["Species","Up","Down"]
line = "\t".join(line)
print(line)

for n in t.traverse():
    line = list()
    if n.is_leaf():
        line.append(n.name)
        line.append("0")
        line.append("0")
    else:
        i+=1
        line.append("n"+str(i))
        u,l = n.name.split("_")
        line.append(u)
        line.append(l)

        n.name = ("n" + str(i))

    line = "\t".join(line)
    print(line)
'''
#print(t.write(format=1))